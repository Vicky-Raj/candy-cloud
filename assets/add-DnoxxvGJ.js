import{j as e,n as f,m as S,t as v,W as P,a4 as q,a6 as n,K as B,y as a,G as d,A as h,L as u,X as b,v as k,C as m,D as E,E as T,F as L,P as z,H as p,S as C,o,a2 as A,q as j,a3 as $,a5 as N}from"./index-CPE_v-qM.js";const F=n.object({code:n.string().min(1,{message:"Customer code is required"}),name:n.string().min(1,{message:"Customer name is required"}),address:n.string().min(1,{message:"Address is required"}),city:n.string().min(1,{message:"City is required"}),postCode:n.string().min(1,{message:"Postcode is required"}),mobile:n.string().min(1,{message:"Mobile number is required"}).regex(/^(\+44|0)7\d{9}$/,{message:"Invalid UK mobile number format"}),phone:n.string().optional(),contact:n.string().optional(),creditTerms:n.string().min(1,{message:"Credit terms are required"}),creditLimit:n.number().min(0,{message:"Credit limit must be non-negative"}),deliveryBetween:n.string().optional()});function U({editMode:t=!1,customerData:r}){const g=f(),{toggleColorScheme:y}=S(),c=v("light"),i=P({initialValues:t&&r?{code:r.code,name:r.name,address:r.address,city:r.city,postCode:r.postCode,mobile:r.mobile,phone:r.phone||"",contact:r.contact||"",creditTerms:r.creditTerms,creditLimit:r.creditLimit,deliveryBetween:r.deliveryBetween||""}:{code:"",name:"",address:"",city:"",postCode:"",mobile:"",phone:"",contact:"",creditTerms:"30 Days",creditLimit:1e3,deliveryBetween:"9am - 5pm"},validate:q(F)});B.useEffect(()=>{t&&r&&(i.setValues({code:r.code,name:r.name,address:r.address,city:r.city,postCode:r.postCode,mobile:r.mobile,phone:r.phone||"",contact:r.contact||"",creditTerms:r.creditTerms,creditLimit:r.creditLimit,deliveryBetween:r.deliveryBetween||""}),i.resetDirty())},[t,r]);const w=s=>{if(t&&r){const l={...r,...s,phone:s.phone||"",contact:s.contact||"",deliveryBetween:s.deliveryBetween||""};console.log("Updated Customer Data:",l),alert(`Customer ${l.name} would be updated (see console).`),g({to:"/customer/$customerId/detail",params:{customerId:r.id}})}else{const l={id:N(),...s,phone:s.phone||"",contact:s.contact||"",deliveryBetween:s.deliveryBetween||""};console.log("New Customer Data:",l),alert(`Customer ${l.name} would be added (see console).`),g({to:"/customers"})}},I=t?`Edit: ${(r==null?void 0:r.name)||"Customer"}`:"Add New Customer",x=t&&r?`/customer/${r.id}/detail`:"/customers";return e.jsxs(a,{header:{height:70},padding:"md",children:[e.jsx(a.Header,{p:"sm",style:s=>({background:c==="dark"?s.colors.dark[5]:`linear-gradient(45deg, ${s.colors.primaryColor[4]}, ${s.colors.primaryColor[6]})`,boxShadow:s.shadows.sm,display:"flex",alignItems:"center"}),children:e.jsxs(d,{justify:"space-between",style:{flexGrow:1},children:[e.jsx(d,{gap:"xs",children:e.jsx(h,{component:u,to:x,variant:"transparent",title:t?"Back to Details":"Back to Customers",size:"lg",children:e.jsx(b,{size:"1.5rem",color:"white"})})}),e.jsxs(d,{align:"center",children:[e.jsx(k,{size:"1.8rem",color:"white",style:{marginRight:"var(--mantine-spacing-xs)"}}),e.jsx(m,{order:3,c:"white",children:I})]}),e.jsx(h,{variant:"transparent",onClick:()=>y(),title:"Toggle color scheme",size:"lg",children:c==="dark"?e.jsx(E,{size:"1.2rem",color:"white"}):e.jsx(T,{size:"1.2rem",color:"white"})})]})}),e.jsx(a.Main,{style:s=>({backgroundColor:c==="dark"?s.colors.dark[8]:s.colors.gray[1]}),children:e.jsx(L,{size:"md",py:"xl",styles:{root:{padding:0}},children:e.jsx(z,{withBorder:!0,shadow:"md",p:"lg",radius:"md",children:e.jsxs("form",{onSubmit:i.onSubmit(w),children:[e.jsxs(p,{cols:{base:1,sm:2},spacing:"lg",children:[e.jsxs(C,{children:[e.jsx(o,{label:"Customer Name",placeholder:"Enter customer name",required:!0,...i.getInputProps("name")}),e.jsx(o,{label:"Customer Code",placeholder:"Enter unique customer code (e.g., CUST00X)",required:!0,...i.getInputProps("code")}),e.jsx(o,{label:"Contact Person",placeholder:"Enter contact person's name",...i.getInputProps("contact")})]}),e.jsxs(C,{children:[e.jsx(o,{label:"Mobile Number",placeholder:"Enter mobile number (e.g., 07xxxxxxxxx)",required:!0,...i.getInputProps("mobile")}),e.jsx(o,{label:"Phone Number (Optional)",placeholder:"Enter landline number",...i.getInputProps("phone")}),e.jsx(o,{label:"Delivery Slot (Optional)",placeholder:"e.g., 9am - 1pm",...i.getInputProps("deliveryBetween")})]})]}),e.jsx(m,{order:4,mt:"xl",mb:"md",children:"Address"}),e.jsxs(p,{cols:{base:1,sm:2},spacing:"lg",children:[e.jsx(o,{label:"Street Address",placeholder:"Enter street address",required:!0,...i.getInputProps("address")}),e.jsx(o,{label:"City",placeholder:"Enter city",required:!0,...i.getInputProps("city")}),e.jsx(o,{label:"Postcode",placeholder:"Enter postcode",required:!0,...i.getInputProps("postCode")})]}),e.jsx(m,{order:4,mt:"xl",mb:"md",children:"Credit Information"}),e.jsxs(p,{cols:{base:1,sm:2},spacing:"lg",children:[e.jsx(o,{label:"Credit Terms",placeholder:"e.g., 30 Days, COD",required:!0,...i.getInputProps("creditTerms")}),e.jsx(A,{label:"Credit Limit (Â£)",placeholder:"Enter credit limit",required:!0,min:0,allowDecimal:!1,...i.getInputProps("creditLimit")})]}),e.jsxs(d,{justify:"flex-end",mt:"xl",children:[e.jsx(j,{variant:"default",component:u,to:x,leftSection:e.jsx(b,{size:14}),children:"Cancel"}),e.jsx(j,{type:"submit",leftSection:e.jsx($,{size:14}),children:t?"Update Customer":"Save Customer"})]})]})})})})]})}const O=()=>e.jsx(U,{editMode:!1});export{U as CustomerFormPage,O as component};
