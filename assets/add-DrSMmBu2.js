import{j as e,n as S,m as v,t as P,W as q,a4 as B,a6 as n,K as k,y as m,G as d,A as u,X as C,v as E,C as p,D as T,E as z,F as L,P as A,H as g,S as b,o as t,a2 as $,q as j,a3 as N,a5 as F}from"./index-CI7uwqMN.js";const U=n.object({code:n.string().min(1,{message:"Customer code is required"}),name:n.string().min(1,{message:"Customer name is required"}),address:n.string().min(1,{message:"Address is required"}),city:n.string().min(1,{message:"City is required"}),postCode:n.string().min(1,{message:"Postcode is required"}),mobile:n.string().min(1,{message:"Mobile number is required"}).regex(/^(\+44|0)7\d{9}$/,{message:"Invalid UK mobile number format"}),phone:n.string().optional(),contact:n.string().optional(),creditTerms:n.string().min(1,{message:"Credit terms are required"}),creditLimit:n.number().min(0,{message:"Credit limit must be non-negative"}),deliveryBetween:n.string().optional()});function G({editMode:o=!1,customerData:r,onCancel:x}){const c=S(),{toggleColorScheme:y}=v(),a=P("light"),i=q({initialValues:o&&r?{code:r.code,name:r.name,address:r.address,city:r.city,postCode:r.postCode,mobile:r.mobile,phone:r.phone||"",contact:r.contact||"",creditTerms:r.creditTerms,creditLimit:r.creditLimit,deliveryBetween:r.deliveryBetween||""}:{code:"",name:"",address:"",city:"",postCode:"",mobile:"",phone:"",contact:"",creditTerms:"30 Days",creditLimit:1e3,deliveryBetween:"9am - 5pm"},validate:B(U)});k.useEffect(()=>{o&&r&&(i.setValues({code:r.code,name:r.name,address:r.address,city:r.city,postCode:r.postCode,mobile:r.mobile,phone:r.phone||"",contact:r.contact||"",creditTerms:r.creditTerms,creditLimit:r.creditLimit,deliveryBetween:r.deliveryBetween||""}),i.resetDirty())},[o,r]);const w=s=>{if(o&&r){const l={...r,...s,phone:s.phone||"",contact:s.contact||"",deliveryBetween:s.deliveryBetween||""};console.log("Updated Customer Data:",l),alert(`Customer ${l.name} would be updated (see console).`),c({to:"/customer/$customerId/detail",params:{customerId:r.id}})}else{const l={id:F(),...s,phone:s.phone||"",contact:s.contact||"",deliveryBetween:s.deliveryBetween||""};console.log("New Customer Data:",l),alert(`Customer ${l.name} would be added (see console).`),c({to:"/customers"})}},I=o?`Edit: ${(r==null?void 0:r.name)||"Customer"}`:"Add New Customer",f=o&&r?`/customer/${r.id}/detail`:"/customers",h=()=>{x?x():c({to:f})};return e.jsxs(m,{header:{height:70},padding:"md",children:[e.jsx(m.Header,{p:"sm",style:s=>({background:a==="dark"?s.colors.dark[5]:`linear-gradient(45deg, ${s.colors.primaryColor[4]}, ${s.colors.primaryColor[6]})`,boxShadow:s.shadows.sm,display:"flex",alignItems:"center"}),children:e.jsxs(d,{justify:"space-between",style:{flexGrow:1},children:[e.jsx(d,{gap:"xs",children:e.jsx(u,{onClick:h,variant:"transparent",title:o?"Back to Details":"Back to Customers",size:"lg",children:e.jsx(C,{size:"1.5rem",color:"white"})})}),e.jsxs(d,{align:"center",children:[e.jsx(E,{size:"1.8rem",color:"white",style:{marginRight:"var(--mantine-spacing-xs)"}}),e.jsx(p,{order:3,c:"white",children:I})]}),e.jsx(u,{variant:"transparent",onClick:()=>y(),title:"Toggle color scheme",size:"lg",children:a==="dark"?e.jsx(T,{size:"1.2rem",color:"white"}):e.jsx(z,{size:"1.2rem",color:"white"})})]})}),e.jsx(m.Main,{style:s=>({padding:0,backgroundColor:a==="dark"?s.colors.dark[8]:s.colors.gray[1]}),children:e.jsx(L,{size:"md",py:"xl",styles:{root:{padding:0}},children:e.jsx(A,{withBorder:!0,shadow:"md",p:"lg",radius:"md",children:e.jsxs("form",{onSubmit:i.onSubmit(w),children:[e.jsxs(g,{cols:{base:1,sm:2},spacing:"lg",children:[e.jsxs(b,{children:[e.jsx(t,{label:"Customer Name",placeholder:"Enter customer name",required:!0,...i.getInputProps("name")}),e.jsx(t,{label:"Customer Code",placeholder:"Enter unique customer code (e.g., CUST00X)",required:!0,...i.getInputProps("code")}),e.jsx(t,{label:"Contact Person",placeholder:"Enter contact person's name",...i.getInputProps("contact")})]}),e.jsxs(b,{children:[e.jsx(t,{label:"Mobile Number",placeholder:"Enter mobile number (e.g., 07xxxxxxxxx)",required:!0,...i.getInputProps("mobile")}),e.jsx(t,{label:"Phone Number (Optional)",placeholder:"Enter landline number",...i.getInputProps("phone")}),e.jsx(t,{label:"Delivery Slot (Optional)",placeholder:"e.g., 9am - 1pm",...i.getInputProps("deliveryBetween")})]})]}),e.jsx(p,{order:4,mt:"xl",mb:"md",children:"Address"}),e.jsxs(g,{cols:{base:1,sm:2},spacing:"lg",children:[e.jsx(t,{label:"Street Address",placeholder:"Enter street address",required:!0,...i.getInputProps("address")}),e.jsx(t,{label:"City",placeholder:"Enter city",required:!0,...i.getInputProps("city")}),e.jsx(t,{label:"Postcode",placeholder:"Enter postcode",required:!0,...i.getInputProps("postCode")})]}),e.jsx(p,{order:4,mt:"xl",mb:"md",children:"Credit Information"}),e.jsxs(g,{cols:{base:1,sm:2},spacing:"lg",children:[e.jsx(t,{label:"Credit Terms",placeholder:"e.g., 30 Days, COD",required:!0,...i.getInputProps("creditTerms")}),e.jsx($,{label:"Credit Limit (Â£)",placeholder:"Enter credit limit",required:!0,min:0,allowDecimal:!1,...i.getInputProps("creditLimit")})]}),e.jsxs(d,{justify:"flex-end",mt:"xl",children:[e.jsx(j,{variant:"default",onClick:h,leftSection:e.jsx(C,{size:14}),children:"Cancel"}),e.jsx(j,{type:"submit",leftSection:e.jsx(N,{size:14}),children:o?"Update Customer":"Save Customer"})]})]})})})})]})}const R=()=>e.jsx(G,{editMode:!1});export{G as CustomerFormPage,R as component};
